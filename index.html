<!DOCTYPE html>
<html>
  <head>
    <title>Components</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/w3.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/mp.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/css/mp-components.css" />
    <script src="date.js"></script>
    <script src="dateRange.js"></script>
    <script src="selectSingle.js"></script>
    <script src="selectMany.js"></script>
    <script src="textBox.js"></script>
    <script src="dialog.js"></script>
  </head>
  <body>
    <h3>Test Components</h3>

    <div id="header" class="mp-nowrap-container mp-header">
      <mp-text id="fullname" placeholder="Full Name" class="mp-header-item"></mp-text>
      <mp-select id="sort" placeholder="Sort Order"  class="mp-header-item"></mp-select>
      <mp-selectmany id="district" placeholder="All Districts" class="mp-header-item"></mp-selectmany>
      <mp-date id="date" class="mp-header-item"></mp-date>
      <mp-daterange id="dates" class="mp-header-item"></mp-daterange>
      <button id="btnDialog" class="mp-header-item">Show Dialog</button>
    </div>

    <mp-dialog id="dialog">
      <table>
        <thead>
          <tr><th class="w3-blue">header</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>main content: fills remaining space<br>
              x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>
            </td>
          </tr>
        </tbody>
      </table>
    </mp-dialog>


    <script>
      orders = [
        ["asc", "Ascending"],
        ["desc", "Descending"],
      ];

      var districts = [
        ["1", "District 1"],
        ["2", "District 2"],
        ["3", "District 3"],
        ["4", "District 4"],
        ["5", "District 5"],
        ["6", "District 6"],
        ["7", "District 7"],
      ];

      var selectedName = "Michel Poirier";
      var selectedOrder = "asc";
      var selectedDistrict = ["2","4"];
      var selectedDate = "2020-06-11";
      var selectedDates = ["2020-03-01", "2020-03-31"];

      (function () {

        var fullname = document.getElementById("fullname");
        fullname.init({
          value: selectedName,
          caption: "Display name:",
          placeholder: "Enter full name",
          pattern: "",
          required: true,
        }); 
        fullname.addEventListener("changed", function (event) {
          console.log("Changed event fired: " + event.detail.value);
        });

        var sort = document.getElementById("sort");
        sort.init({
          list: orders, 
          value: selectedOrder,
        });
        sort.addEventListener("changed", function (event) {
          console.log("Changed event fired: " + event.detail.value);
        });

        var district = document.getElementById("district");
        district.init({
          list: districts, 
          value: selectedDistrict,
        });
        district.addEventListener("changed", function (event) {
          console.log("Changed event fired: " + event.detail.join(","));
        });

        var date = document.getElementById("date");
        date.init({
          value: selectedDate,
          caption: "The Date:",
          //placeholder: "Debut",
          pattern: "\d{4}-\d{2}-\d{2}",
          required: true,
        });
        date.addEventListener("changed", function (event) {
          console.log("Changed event fired: " + event.detail.value);
        });

        var dates = document.getElementById("dates");
        dates.init({
          value: selectedDates,
          caption: ["Debut:","Fin:"],
          //placeholder: ["Debut","Fin"],
          pattern: "\d{4}-\d{2}-\d{2}",
          required: true,
        });
        dates.addEventListener("changed", function (event) {
          console.log("Changed event fired: " + event.detail.join(","));
        });

        var dialog = document.getElementById("dialog");
        dialog.init({
          buttons: [mpDialog.Buttons.Cancel, mpDialog.Buttons.OK],
          themeUrl:'/css/w3.css',
          theme: "w3-blue",
          title: "Dialog Title",
          width: "400px",
          height: "400px",
        });

        var hdr = document.querySelector('mp-dialog').shadowRoot.querySelector(".dialogheader");
        hdr.style.color = "red";
        
        dialog.addEventListener("closed", function (event) {
          console.log("Closed event fired: " + event.detail.value);
        });

        var btn = document.getElementById("btnDialog");
        btn.addEventListener("click", function (event) {
          dialog.show();
        });
      })();
    </script>
    <style>
      mp-dialog::part(header) {
        background-color: pink;
      }
    </style>
  </body>
</html>
